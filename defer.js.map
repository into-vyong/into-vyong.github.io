{"version":3,"file":"defer.js","sources":["../assets/scripts/analytics/google.js","../assets/scripts/lazyload/disqus.js","../assets/scripts/patches/fetch.js","../assets/scripts/lazyload/core.js","../assets/scripts/entrypoint.js","../assets/scripts/patches/menu.js","../assets/scripts/lazyload/serviceworker.js"],"sourcesContent":["var screen = window.screen,\n    encode = encodeURIComponent,\n    max = Math.max,\n    //min = Math.min,\n    performance = window.performance,\n    t = performance && performance.timing,\n    filterNumber = function (num) { return isNaN(num) || num == Infinity || num < 0 ? void 0 : num; },\n    randomStr = function (num) { return Math.random().toString(36).slice(-num); },\n    randomNum = function (num) { return Math.ceil(Math.random() * (num - 1)) + 1; };\n\nconst loadGoogleAnalytics = () => {\n    var pv_data = [\n        // Random String against Easy Privacy\n        randomStr(randomNum(4)) + '=' + randomStr(randomNum(6)),\n        // GA tid\n        'ga=' + \"UA-101362832-1\",\n        // Title\n        'dt=' + encode(document.title),\n        // Document Encoding\n        'de=' + encode(document.characterSet || document.charset),\n        // Referrer\n        'dr=' + encode(document.referrer),\n        // Language\n        'ul=' + (navigator.language || navigator.browserLanguage || navigator.userLanguage),\n        // Color Depth\n        'sd=' + screen.colorDepth + '-bit',\n        // Screen Size\n        'sr=' + screen.width + 'x' + screen.height,\n        // Display\n        'vp=' + max(document.documentElement.clientWidth, window.innerWidth || 0) + 'x' + max(document.documentElement.clientHeight, window.innerHeight || 0),\n        // plt: Page Loading Time\n        // open the page => window.onload\n        // (window.onload)\n        'plt=' + filterNumber(t.loadEventStart - t.navigationStart || 0),\n        // dns: DNS Time\n        'dns=' + filterNumber(t.domainLookupEnd - t.domainLookupStart || 0),\n        // pdt: Page Dowenload Time\n        // start download time => finish download time\n        'pdt=' + filterNumber(t.responseEnd - t.responseStart || 0),\n        // rrt: Redirect Time\n        'rrt=' + filterNumber(t.redirectEnd - t.redirectStart || 0),\n        // tcp: TCP Time\n        'tcp=' + filterNumber(t.connectEnd - t.connectStart || 0),\n        // srt: Server Response Time\n        // start request => server send first byte\n        // (TTFB - TCP - DNS)\n        'srt=' + filterNumber(t.responseStart - t.requestStart || 0),\n        // dit: DOM Interactive Time\n        'dit=' + filterNumber(t.domInteractive - t.domLoading || 0),\n        // clt: Content Loading Time\n        // open the page => DOMContentLoaded\n        'clt=' + filterNumber(t.domContentLoadedEventStart - t.navigationStart || 0),\n        'z=' + Date.now()\n    ];\n\n    const apiUrl = \"https://divine-credit-5273.loerfy.workers.dev\" + \"?\" + pv_data.join(\"&\");\n    fetch(apiUrl, { referrerPolicy: 'unsafe-url', credentials: 'include' })\n        .catch((any) => console.log(any))\n}\n\nexport default loadGoogleAnalytics;\n","import fetch from \"../patches/fetch\";\n\nconst instant_load = () => {\n    const d = document,\n        s = d.createElement('script'),\n        btn = document.getElementById('load-disqus');\n    s.src = 'https://wincer.disqus.com/embed.js';\n    s.setAttribute('data-timestamp', + new Date());\n    (d.head || d.body).appendChild(s);\n    btn.classList.toggle('hidden');\n}\n\nconst loadDisqus = () => {\n    document.getElementById('load-disqus').onclick = instant_load;\n    console.log('Trying auto load disqus...');\n    fetch('https://disqus.com/next/config.json', { timeout: 100 })\n        .then(() => {\n            instant_load()\n        })\n        .catch(() => console.log('Auto load disqus timeout.'))\n}\n\nexport default loadDisqus;","const fetch = (url, { timeout, ...options } = {}) => {\n    const controller = new AbortController(),\n        signal = controller.signal;\n    if (timeout) {\n        setTimeout(() => controller.abort(), timeout);\n        return window.fetch(url, { signal: signal, ...options })\n    }\n    return window.fetch(url, { ...options })\n}\n\nexport default fetch;","import loadDisqus from './disqus'\n\nconst loadLazy = (entry, observer) => {\n    if (entry.isIntersecting) {\n        let lazy = entry.target;\n        if (lazy.tagName === \"DIV\") {\n            lazy.style.backgroundImage = `url(${lazy.dataset.src})`;\n        } else if (lazy.tagName === \"BUTTON\") {\n            loadDisqus()\n        } else {\n            lazy.src = lazy.dataset.src;\n        }\n        lazy.classList.remove(\"lazy\");\n        observer.unobserve(lazy)\n    }\n}\nconst lazyLoadThing = () => {\n    let lazyThings = [].slice.call(document.getElementsByClassName(\"lazy\"));\n    if (\"IntersectionObserver\" in window) {\n        let lazyObserver = new IntersectionObserver(function (entries, observer) {\n            entries.forEach(entry => loadLazy(entry, lazyObserver));\n        });\n        lazyThings.forEach(function (lazyImage) {\n            lazyObserver.observe(lazyImage);\n        });\n    }\n}\n\nexport default lazyLoadThing;","import loadGoogleAnalytics from \"./analytics/google\";\nimport addToggleMenu from './patches/menu';\nimport lazyLoadThing from './lazyload/core'\nimport registerServiceWorker from './lazyload/serviceworker'\n\n\nwindow.addEventListener(\"load\", () => {\n    addToggleMenu()\n    lazyLoadThing();\n    registerServiceWorker();\n    loadGoogleAnalytics();\n})\n","const addToggleMenu = () => {\n    const menu = document.getElementById(\"menu\");\n    const navbar = document.getElementById(\"navbar\")\n    menu.onclick = () => {\n        navbar.classList.toggle('expanded')\n        menu.classList.toggle('expanded')\n    }\n}\n\n\nexport default addToggleMenu;","const registerServiceWorker = () => {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.register('/service-worker.js');\n    }\n}\n\nexport default registerServiceWorker;"],"names":["screen","window","encode","encodeURIComponent","max","Math","performance","t","timing","filterNumber","num","isNaN","Infinity","randomStr","random","toString","slice","randomNum","ceil","instant_load","d","document","s","createElement","btn","getElementById","src","setAttribute","Date","head","body","appendChild","classList","toggle","loadDisqus","onclick","console","log","url","timeout","options","controller","AbortController","signal","setTimeout","abort","fetch","then","catch","lazyLoadThing","lazyThings","call","getElementsByClassName","lazyObserver","IntersectionObserver","entries","observer","forEach","entry","isIntersecting","lazy","target","tagName","style","backgroundImage","dataset","remove","unobserve","loadLazy","lazyImage","observe","addEventListener","menu","navbar","addToggleMenu","navigator","serviceWorker","register","apiUrl","title","characterSet","charset","referrer","language","browserLanguage","userLanguage","colorDepth","width","height","documentElement","clientWidth","innerWidth","clientHeight","innerHeight","loadEventStart","navigationStart","domainLookupEnd","domainLookupStart","responseEnd","responseStart","redirectEnd","redirectStart","connectEnd","connectStart","requestStart","domInteractive","domLoading","domContentLoadedEventStart","now","join","referrerPolicy","credentials","any","loadGoogleAnalytics"],"mappings":"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"}